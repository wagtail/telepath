
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>API reference - telepath - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="indigo">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="telepath - Documentation" class="md-header-nav__button md-logo" aria-label="telepath - Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            telepath - Documentation
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              API reference
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/wagtail/telepath/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="telepath - Documentation" class="md-nav__button md-logo" aria-label="telepath - Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    telepath - Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/wagtail/telepath/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        Tutorial
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../adapters/" class="md-nav__link">
        Packing external objects
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../primitive_adapters/" class="md-nav__link">
        Packing objects to primitive values
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        API reference
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#python-api" class="md-nav__link">
    Python API
  </a>
  
    <nav class="md-nav" aria-label="Python API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#telepathadapter" class="md-nav__link">
    telepath.Adapter()
  </a>
  
    <nav class="md-nav" aria-label="telepath.Adapter()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternative-adapter-api-deprecated" class="md-nav__link">
    Alternative adapter API (deprecated)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telepathautoadapter" class="md-nav__link">
    telepath.AutoAdapter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telepathregisteradapter-cls" class="md-nav__link">
    telepath.register(adapter, cls)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telepathjscontext" class="md-nav__link">
    telepath.JSContext()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telepathadapterregistrytelepath_js_pathtelepathjstelepathjs" class="md-nav__link">
    telepath.AdapterRegistry(telepath_js_path='telepath/js/telepath.js')
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#javascript-api" class="md-nav__link">
    JavaScript API
  </a>
  
    <nav class="md-nav" aria-label="JavaScript API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windowtelepath" class="md-nav__link">
    window.telepath
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../data_format/" class="md-nav__link">
        Data format
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#python-api" class="md-nav__link">
    Python API
  </a>
  
    <nav class="md-nav" aria-label="Python API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#telepathadapter" class="md-nav__link">
    telepath.Adapter()
  </a>
  
    <nav class="md-nav" aria-label="telepath.Adapter()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternative-adapter-api-deprecated" class="md-nav__link">
    Alternative adapter API (deprecated)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telepathautoadapter" class="md-nav__link">
    telepath.AutoAdapter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telepathregisteradapter-cls" class="md-nav__link">
    telepath.register(adapter, cls)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telepathjscontext" class="md-nav__link">
    telepath.JSContext()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telepathadapterregistrytelepath_js_pathtelepathjstelepathjs" class="md-nav__link">
    telepath.AdapterRegistry(telepath_js_path='telepath/js/telepath.js')
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#javascript-api" class="md-nav__link">
    JavaScript API
  </a>
  
    <nav class="md-nav" aria-label="JavaScript API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windowtelepath" class="md-nav__link">
    window.telepath
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/wagtail/telepath/blob/main/docs/api_reference.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="api-reference">API reference</h1>
<h2 id="python-api">Python API</h2>
<h3 id="telepathadapter"><code>telepath.Adapter()</code></h3>
<p>Base class for an adapter object, which defines how telepath should handle a particular Python type. Subclasses should define the following method:</p>
<ul>
<li>
<p><code>pack(obj, context)</code> - Returns a 'deconstructed' version of the object <code>obj</code>, consisting of the data necessary to reconstruct it in JavaScript. This should be a tuple <code>(identifier, args)</code>:</p>
<ul>
<li><code>identifier</code> - the identifier for a JavaScript constructor function that will be registered with the JavaScript <code>register</code> method; this constructor function will be called when an object of this type is encountered in the data. This identifier should be unique among all adapter objects registered; it is recommended to use a namespaced string with dots as separators (e.g. <code>'myproject.animals.Cat'</code>).</li>
<li><code>args</code> - the list of arguments that should be passed to the constructor function to recreate the corresponding client-side object. The arguments must themselves be telepath-packable values (i.e. basic JSON-serialisable types, or objects with a telepath adapter defined).</li>
</ul>
<p>The <code>context</code> argument allows the adapter to specify JavaScript and CSS assets that must be included on the client-side page when unpacking the object; at minimum, this should include the JavaScript file that defines and registers the constructor function returned from <code>pack</code>. The <code>context</code> object defines the method:</p>
<ul>
<li><code>context.add_media(media=None, js=None, css=None)</code> - adds a media definition to include on the client-side page. This can be any of the following: a <a href="https://docs.djangoproject.com/en/stable/topics/forms/media/">Django form media object</a>, a single JavaScript file path, a list of JavaScript file paths, and/or a dict of CSS file paths where the key is a media type (i.e. the same convention as used in form media objects).</li>
</ul>
</li>
</ul>
<h4 id="alternative-adapter-api-deprecated">Alternative adapter API (deprecated)</h4>
<p>As an alternative to defining <code>pack</code>, adapter subclasses may define the following:</p>
<ul>
<li><code>js_constructor</code> - The identifier for a JavaScript constructor function, as above.</li>
<li><code>js_args(obj)</code> - Given the object to be packed, return the list of arguments that should be passed to the constructor function.</li>
<li><code>get_media(obj)</code> - Given the object to be packed, return a <a href="https://docs.djangoproject.com/en/stable/topics/forms/media/">Django form media object</a> for the JavaScript and CSS assets needed to unpack the client-side object. This should include the .js file where the constructor function is defined and registered with telepath. Alternatively, if the media definition is the same for all object instances, this can be defined as an inner <code>Media</code> class.</li>
</ul>
<h3 id="telepathautoadapter"><code>telepath.AutoAdapter()</code></h3>
<p>A general-purpose adapter object for classes that define their own packing logic; this is generally the preferred route when making classes you have defined yourself available to telepath, as it is more concise than defining an adapter object explicitly. The class must implement a method <code>telepath_pack(self, context)</code>; AutoAdapter will delegate to this when packing the object.</p>
<h3 id="telepathregisteradapter-cls"><code>telepath.register(adapter, cls)</code></h3>
<p>Registers an adapter object (an instance of a <code>telepath.Adapter</code> subclass) to be used by telepath when it encounters an object of type <code>cls</code>. If more than one class in an object's inheritance chain has an adapter defined, the most specific one according to the method resolution order (MRO) will be used.</p>
<p>Can also be applied as a class decorator <code>@telepath.register(adapter=MyAdapter())</code>; in this case <code>adapter</code> is optional and defaults to <code>AutoAdapter()</code> if not specified.</p>
<h3 id="telepathjscontext"><code>telepath.JSContext()</code></h3>
<p>An object for handling all packing operations for a particular request. Provides the following methods and attributes:</p>
<ul>
<li><code>pack(obj)</code> - Returns the packed representation of the given object. This representation is a value that can be serialised as JSON and included in an HTTP response; on the client side this can then be deserialised with <code>JSON.parse</code> and passed to <code>telepath.unpack</code> to obtain the unpacked object.</li>
<li><code>media</code> - A <a href="https://docs.djangoproject.com/en/stable/topics/forms/media/">Django form media object</a> listing the JavaScript and CSS assets needed to unpack all objects that have been passed to <code>pack</code>. This object should be rendered into a template response to ensure that the client-side <code>telepath.unpack</code> operation has all the necessary definitions.</li>
</ul>
<h3 id="telepathadapterregistrytelepath_js_pathtelepathjstelepathjs"><code>telepath.AdapterRegistry(telepath_js_path='telepath/js/telepath.js')</code></h3>
<p>An object that manages a set of adapter objects to be used collectively for packing values. Normally you will not need to work with this class directly, as the telepath module maintains a global set of adapters that are registered with the top-level <code>register</code> function and used by <code>JSContext</code>; however, in some cases it may be useful to build a 'local' registry of adapters with different behaviour from the global set, such as serving media from a custom application-specific path. Provides the method <code>register(adapter, cls)</code> which is equivalent to the top-level <code>register</code> function, and the property <code>js_context_class</code> which returns a class equivalent to <code>JSContext</code> that uses this local registry when packing values. The optional <code>telepath_js_path</code> argument specifies the path to <code>telepath.js</code> to be used in this object's media definitions.</p>
<h2 id="javascript-api">JavaScript API</h2>
<h3 id="windowtelepath"><code>window.telepath</code></h3>
<p>An object that manages unpacking values. Provides the following methods:</p>
<ul>
<li><code>register(name, constructor)</code> - Registers a constructor function to be used when unpacking. The <code>name</code> argument should match the identifier given as <code>js_constructor</code> for an adapter object.</li>
<li><code>unpack(val)</code> - Unpacks the packed telepath data representation into a native JavaScript object.</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../primitive_adapters/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Packing objects to primitive values
              </div>
            </div>
          </a>
        
        
          <a href="../data_format/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Data format
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>